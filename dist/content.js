(()=>{"use strict";function e(n=document.body,o=!0){var t;if(n instanceof HTMLElement&&("SCRIPT"===n.tagName||"none"===n.style.display))return"";let r="";if(n.nodeType===Node.TEXT_NODE){const e=(null===(t=n.textContent)||void 0===t?void 0:t.trim())||"";return e&&(r+=e),r}if(n.nodeType===Node.ELEMENT_NODE&&n instanceof HTMLElement){const t=n.tagName.toLowerCase(),s=function(e){const n=window.getComputedStyle(e),o={};return["display","position","width","height","margin","padding","background-color","color","font-family","font-size","border","border-radius","box-shadow","flex","grid","transform","opacity","z-index","text-align"].forEach((e=>{const t=n.getPropertyValue(e);t&&"none"!==t&&"normal"!==t&&"0px"!==t&&(o[e]=t)})),o}(n);if(r+="<"+t,n.id&&(r+=` id="${n.id}"`),n.className&&(r+=` class="${n.className}"`),Object.keys(s).length>0){const e=Object.entries(s).map((([e,n])=>`${e}: ${n}`)).join("; ");r+=` style="${e}"`}if(r+=">",n.children.length>0&&(r+="\n"),Array.from(n.childNodes).forEach((n=>{const o=e(n,!1);o&&(r+="  "+o.split("\n").join("\n  ")+"\n")})),r+="</"+t+">",o){const e="<!DOCTYPE html>\n",n=document.head.outerHTML;r=e+"<html>\n"+n+"\n"+r+"\n</html>"}}return r}chrome.runtime.onMessage.addListener(((n,o,t)=>{if(console.log("Received message:",n),"SCRAPE_PAGE"===n.type)try{console.log("Starting page scrape...");const n=e(document.documentElement,!0);console.log("Scraping complete"),t({success:!0,data:n})}catch(e){console.error("Scraping error:",e),t({success:!1,error:e instanceof Error?e.message:"Failed to scrape page"})}return!0}))})();